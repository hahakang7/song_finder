<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"><title>비교 결과</title></head>
<body>
<h2>비교 결과 (더미)</h2>
<a href="/">홈</a>

<p>모드: <b th:text="${compareMode}"></b></p>
<p>
    제외됨: <b th:text="${dumpedCount}"></b> /
    없는 곡: <b th:text="${missingCount}"></b> /
    포함됨: <b th:text="${containedCount}"></b>
</p>

<div>
    <span>아티스트: <b th:text="${artistName}"></b></span>
    <form action="/subscribe/resync/artist" method="post" data-protected="true" style="display:inline;">
        <input type="hidden" name="channelId" th:value="${channelId}">
        <input type="hidden" name="playlistId" th:value="${playlistId}">
        <button type="submit">아티스트 재동기화</button>
    </form>
</div>

<div style="margin-top:8px;">
    <span>플레이리스트: <b th:text="${playlistTitle}"></b></span>
    <form action="/subscribe/resync/playlist" method="post" data-protected="true" style="display:inline;">
        <input type="hidden" name="channelId" th:value="${channelId}">
        <input type="hidden" name="playlistId" th:value="${playlistId}">
        <button type="submit">플레이리스트 재동기화</button>
    </form>
</div>

<h3>곡 목록</h3>
<ul>
    <li th:each="item : ${items}">
        <img th:src="${item.thumbnailUrl}" alt="thumb">
        <b th:text="${item.normalizedTitle}"></b>
        <span th:text="${item.status}"></span>
        <form th:if="${item.status.name() == 'MISSING'}" action="/dump/add" method="post" data-protected="true" style="display:inline;">
            <input type="hidden" name="channelId" th:value="${channelId}">
            <input type="hidden" name="playlistId" th:value="${playlistId}">
            <button type="submit">제외</button>
        </form>
        <form th:if="${item.status.name() == 'DUMPED'}" action="/dump/undo" method="post" data-protected="true" style="display:inline;">
            <input type="hidden" name="channelId" th:value="${channelId}">
            <input type="hidden" name="playlistId" th:value="${playlistId}">
            <button type="submit">되돌리기</button>
        </form>
    </li>
</ul>

<a th:href="@{/playlists(channelId=${channelId})}" data-protected="true">플레이리스트로 돌아가기</a>

<div th:replace="~{fragments/auth-modal :: authModal}"></div>
<script th:replace="~{fragments/auth-modal :: authScript}"></script>
</body>
</html>
