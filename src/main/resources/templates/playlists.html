<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"><title>Playlists</title></head>
<body>
<h2>재생목록 관리 (더미)</h2>
<a href="/">홈</a>

<div th:if="${selectedChannelId != null}" style="margin-top:8px; color:#555;">
    선택된 아티스트: <span th:text="${selectedChannelId}"></span>
</div>

<ul>
    <li th:each="pl : ${playlists}">
        <a th:href="@{/playlist/{id}(id=${pl.id})}" data-protected="true" th:text="${pl.title}"></a>
        <span th:text="${pl.subscribed} ? '✅ 구독됨' : '❌ 구독 안 됨'" style="margin-left:6px;"></span>
        <small th:text="'(' + ${pl.lastSyncedAt} + ')'" style="color:gray;"></small>
        <form action="/subscribe/playlist/toggle" method="post" data-protected="true" style="display:inline;">
            <input type="hidden" name="playlistId" th:value="${pl.id}">
            <button type="submit" th:text="${pl.subscribed} ? '구독 해지' : '구독'"></button>
        </form>
        <a th:if="${selectedChannelId != null}" th:href="@{/compare(channelId=${selectedChannelId},playlistId=${pl.id})}" data-protected="true">비교</a>
    </li>
</ul>

<a href="/artist/link" data-protected="true">아티스트 등록</a>

<div th:replace="~{fragments/auth-modal :: authModal}"></div>
<script th:replace="~{fragments/auth-modal :: authScript}"></script>
</body>
</html>
